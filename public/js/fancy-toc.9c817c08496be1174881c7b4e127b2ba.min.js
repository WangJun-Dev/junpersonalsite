window.onload=function(){if(n=document.querySelector(".sideTOC"),!n)return;var t,n,s,o,a,r,e=document.querySelector(".toc-marker path"),l=0,d=0;window.addEventListener("resize",i,!1),window.addEventListener("scroll",c,!1),o=document.querySelector(".sideTOC details"),o&&o.addEventListener("toggle",i,!1),i();function i(){t=[].slice.call(n.querySelectorAll("li")),t=t.map(function(e){var t=e.querySelector("a"),n=document.getElementById(t?.getAttribute("href").slice(1));return{listItem:e,anchor:t,target:n}}),t=t.filter(function(e){return!!e.target});var i,o=[];t.forEach(function(t,n){var s=t.anchor.parentElement.parentElement.parentElement.offsetLeft+15,a=t.anchor.offsetTop,r=t.anchor.offsetHeight;n===0?(o.push("M",s,a,"L",s,a+r),t.pathStart=0):(i!==s&&o.push("L",i,a),o.push("L",s,a),e.setAttribute("d",o.join(" ")),t.pathStart=e.getTotalLength()||0,o.push("L",s,a+r)),i=s,e.setAttribute("d",o.join(" ")),t.pathEnd=e.getTotalLength()}),s=e.getTotalLength(),c()}function c(){var i=window.innerHeight,n=s,o=0,c=0;t.forEach(function(e){var t=e.target.parentElement.parentElement.getBoundingClientRect();t.bottom>i*l&&t.top<i*(1-d)?(n=Math.min(e.pathStart,n),o=Math.max(e.pathEnd,o),c+=1,e.listItem.classList.add("visible")):e.listItem.classList.remove("visible")}),c>0&&n<o?(n!==a||o!==r)&&(e.setAttribute("stroke-dashoffset","1"),e.setAttribute("stroke-dasharray","1, "+n+", "+(o-n)+", "+s),e.setAttribute("opacity",1)):e.setAttribute("opacity",.5),a=n,r=o}}